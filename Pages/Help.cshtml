@page
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration
@model woodgrovedemo.Pages.HelpModel
@{
    ViewData["Title"] = "Help";
}
<h1 style="color: @Configuration["Web:BG_Color1"]; padding-bottom: 15px; padding-top: 15px;">@ViewData["Title"]</h1>
<div class="container">

    The @Configuration["Web:DemoName"] Demo is a live demo adapted by @Configuration["Web:CompanyName"] and originally created by Microsoft to demonstrate several Microsoft Entra
    External ID features. The @Configuration["Web:DemoName"] Demo simulates an online grocery store that sells groceries to both individual consumers
    and business customers. It allows you to sign-up and sign-in by using Microsoft Entra External ID and to explore its
    capabilities in scenarios that pertain to external identity management.

    <br />&nbsp;<br />

    <h2 style="color: @Configuration["Web:BG_Color1"];">Select a use case</h2>

    From the right corner of the page, select the <b>Select a use case</b> button. <br />

    <img src="~/images/help/help-button.png"
         style="border-color: @Configuration["Web:BG_Color3"]; border-style: solid; border-width: 1px; border-radius: 5px 5px 5px 5px ; margin-top: 15px; margin-bottom: 15px; width: 65%;">
    <br />
    Select a use case <br />

    <img src="~/images/help/select-button.png"
         style="border-color: @Configuration["Web:BG_Color3"]; border-style: solid; border-width: 1px; border-radius: 5px 5px 5px 5px; margin-bottom: 25px;">
    <br />
    The use cases come with some instructions (1) and button (2) to start the demo and a link (3) to learn how Microsoft
    configured the Woodgrove tenant.
    Read the instructions and start the use case.<br />

    <img src="~/images/help/start-use-case.png"
         style="border-color: @Configuration["Web:BG_Color3"]; border-style: solid; border-width: 1px; border-radius: 5px 5px 5px 5px;">


    <h2 style="color: @Configuration["Web:BG_Color3"]; padding-top: 45px;" id="OnlineRetail">Online retail demo</h2>

    The <a href="/Help#usecase=OnlineRetail">online retail use case</a> is an end-to-end demonstration that illustrates
    several of the most common authentication
    experiences that can be configured for your customer-facing apps.
    To run the use case, follow these steps:

    <div>
        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 15px;">1. User experience</h5>
        On the sign-up or sign-in page notice the following:
        <ol style="margin-top: 5px;">
            <li>The sign-in page is fully customized with the @Configuration["Web:CompanyName"] brand. </li>
            <li>
                The domain name that appears in the web address bar is an extension of the @Configuration["Web:DemoName"] domain
                name (will be available soon).</li>
            <li>The sign-in text appears with some guidance for the customers.</li>
            <li>Uses can sign-in with their email and password, or social accounts.</li>
            <li>Users can also create a new account.</li>
            <li>The footer contains links to the term of use and privacy policies.</li>
        </ol>

        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 5px;">2. Verify your email</h5>
        <ol>
            <li>On the sign-in page, select the <b>No account? Create one</b> link.</li>
            <li>Enter your email address, which will be verified and becomes your login ID. At this time,
                Microsoft Entra exteral ID will send you a verification code to the email you entered.</li>
            <li>Open your mailbox and copy the verification code sent to you. Then, on the sign-in
                page enter the verification code and select <b>next</b>.</li>
        </ol>

        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 5px;">3. Create a @Configuration["Web:DemoName"] account</h5>
        <ol>
            <li>Before you start filling out the sign-up form. Notice that the <b>county</b> is preselected
                (Spain) and also a <b>promo code</b> was auto generated for you. This is done by using the
                <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=PreAttributeCollection">custom
                    authentication extension</a> feature.
            </li>
            <li>Enter a <b>password</b>, re-enter the password, and enter a <b>display name</b>.</li>
            <li>For the city enter an incorrect one. For example, <b>Berlin</b>. You will see soon how this
                is
                handled.</li>
            <li>
                For the <b>special diet</b>, enter eggs, so the @Configuration["Web:DemoName"] Demo will warn you about products that
                contain eggs. The special diet and the promo code are <a
                    class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=CustomAttributes">custom user attributes</a> added to the
                sign-up flow.</li>
            <li>Finally, select <b>next</b> to create a @Configuration["Web:DemoName"] online identity. </li>
            <li>At this point you should
                get an error message that the @Configuration["Web:DemoName"] Demo doesn’t operate in this city.
                This input validation is done using a <a
                    class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=PostAttributeCollection">custom authentication extension</a> we
                configured, that validates the city name, against a list of cities and countries we
                compiled.</li>
            <li>Correct the city (enter Madrid), and try to complete the registration again.</li>
            <li>Select <b>next</b> to complete the registration.</li>
        </ol>


        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 5px;">4. Start using the @Configuration["Web:DemoName"] app</h5>
        <ol>
            <li>After you successfully sign-in, your name appears in the header.</li>
            <li>Now you have the option to add items to the shopping cart.</li>
            <li>Since you specified the eggs allergy, a warning appears next to the eggs. For the warning,
                the app reads <a
                    class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=TokenClaims">a claim from the security token</a>.
            </li>
        </ol>

        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 5px;">5. Investigate your security token</h5>
        <ol>
            <li>Select your name from the header.</li>
            <li>The <b>token</b> page shows the security token that was returned to the application by
                Microsoft Entra external ID. It shows the user object ID, the name and more information.
            </li>
            <li>Take a look on the <b>loyalty number</b>, <b>loyalty since</b>, and <b>loyalty tier</b>
                claims.
                These claims were generated by a
                <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=TokenAugmentation">custom authentication extension</a> we implemented.
            </li>
            <li>It also shows the value of the <b>special diet</b> claim that
                <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=TokenClaims">was added to the security token</a>.
            </li>
        </ol>

        <h5 style="color: @Configuration["Web:BG_Color1"]; padding-top: 5px;">6. Edit your profile</h5>
        <ol>
            <li>From the header, select the <b>profile</b> icon.</li>
            <li>The <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=ProfileEdit">profile editing</a> page lets you manage you profile
                attributes, like display name, surname, given name, city, and others. After you update your
                profile, sign-out and sign-in again.</li>
            <li>You can also
                <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=DeleteAccount">delete your account</a>.
            </li>
            <li><a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=RBAC">Grant yourself permissions
                    Sign-in activity
                </a>, or add yourself to @Configuration["Web:DemoName"] <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=GBAC">Commercial Accounts security group</a>.
            </li>

            <li>Finally, check the
                <a class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="#usecase=Activity">sign-in activity</a>.
            </li>
        </ol>

        <h3 style="color: @Configuration["Web:BG_Color1"]; padding-top: 25px;">Community Help and Support</h3>
    If you find a bug, notice something but are not sure how to solve it, or want to provide product feedback, please
    raise an issue on <a href="https://github.com/microsoft/woodgrove-groceries/issues">GitHub Issues</a>.

        <br />&nbsp;<br />
        App version: @System.Reflection.Assembly.GetExecutingAssembly().GetName().Version!.ToString()
    </div>
